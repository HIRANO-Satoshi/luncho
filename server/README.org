
** Manual install
  cd luncho-server
  curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
  bash再起動でPATHにrustupを入れる
  rustup install nightly ; rustup default nightly
  brew install pypy3
  bin/install-packages.sh
    or
    pip -r requirements-pypy.txt install
** run
  bin/start-gunicorn.sh

** Docker
- build
   docker compose build --progress plain
- run
   docker run luncho-server_app
- ps for containerID
   docker ps
- kill
   docker kill containerID

** Manual install (obsolete pipenv version)
  cd luncho-server
  brew install pipenv
  - pipenv --python 3.9
   - または pipenv --python pypy3 ただし、ujsonで動かない
  pipenv shell
  pipenv install
  - if you have error with orjson
    - pipenv update

  - if you got error on rust or cargo, install rust as instructed [[https://www.rust-lang.org/tools/install][here]] and try pipenv install again.
    - curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
    - bash再起動でPATHにrustupを入れる
    - rustup install nightly ; rustup default nightly

- run
  cd luncho-server
  pipenv shell
  gunicorn --access-logfile - --error-logfile - -k uvicorn.workers.UvicornH11Worker main:app --reload --timeout 600

- 注意
  - pipenvでbad interpreterが出たら
      brew install --force pipenv
      brew link --overwrite pipenv

  - これはreloadでエラーが出る
    uvicorn main:app --reload --port 8000


** Data

- PPP from IFM World Economic Outlook (October 2020)
  - data/imf-dm-export-20201110.csv
  - Press "All Data" to get it at [[https://www.imf.org/external/datamapper/PPPEX@WEO/OEMDC/ADVEC/WEOWORLD][here]]
  - 194 countries and regions
  - Country name is defined as "Table Name" in the following ICP-2017 metadata

- ICP-2017 metadata
  - data/Data_Extract_From_ICP_2017_Metadata.csv
  - Extracted the following metadata from [[https://databank.worldbank.org/source/icp-2017?preview=on][ICP-2017 database]]
  - Code,Long Name,Currency Unit,Table Name,Household consumption price survey: Geographical coverage
  - Examples

     AFG,Islamic State of Afghanistan,AFN: Afghani,Afghanistan,
     ALB,Republic of Albania,ALL: Lek,Albania,Urban only
     DZA,People's Democratic Republic of Algeria,DZD: Algerian Dinar,Algeria,Urban and Rural

- ICP-2017 Purchasing power parity (PPP) (US$ = 1)
  - Extracted the following from [[https://databank.worldbank.org/source/icp-2017?preview=on][ICP-2017 database]]
    - Actual Individual Consumption (AIC) per capita
